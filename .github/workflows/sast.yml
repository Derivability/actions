name: Github Actions SAST
on: [push]
jobs:
  semgrep:
    name: Scan
    runs-on: ubuntu-20.04
    container:
      image: returntocorp/semgrep
    steps:
    - uses: actions/checkout@v3
      with:
        repository: 'juice-shop/juice-shop'
    - run: semgrep --sariff --output=semgrep.sarif --config=auto --metrics=off
    - name: Upload SARIF file for GitHub Advanced Security Dashboard
        uses: github/codeql-action/upload-sarif@v2
        with:
          sarif_file: semgrep.sarif
        if: always()
